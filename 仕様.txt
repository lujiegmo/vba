計算期間の最初日を計算する関数を作ってください。
計算方法について、まずは[未返済年月1]の前月の1日を初期値として最初日にセットしてください。
その後、[入出金情報]にこの最初日より小さい日付があるかどうか確認してください。
あれば、この最初日を戻ってください。
なければ、「未返済年月1の前月」がこの最初日より大きいかをチェックしてください。
もし「未返済年月1の前月」が最初日より小さい場合は、この最初日を戻ってください。
上記以外の場合は、[入出金情報]の最小日付と「未返済年月1の前月」を比較して、小さいのほうをもどってください。

出力データを用意します。
１．[未返済年月1]の前月の月末日を取得して計算期間の最終日とする。
２．この最終日と先ほど計算した計算期間の最初日を一つの出力レコードを作成する。
３．「未返済年月1の前月」が最初日と最終日の間であれば、レコードを分割する。
４．[入出金情報]の日付が最初日と最終日の間であれば、レコードを分割する。ただ、３と含めて、分割日は同じであれば、一つの分割となります。
５．「借入利率取得」で取得した日付が最初日と最終日の間であれば、レコードを分割する。上記と同じく、分割日は同じであれば、一つの分割となります。
６．出力レコードの値を設定する。下記の通り
ステータス：正常
イベント：約定返済
約定返済月：[未返済年月1]の年月
計算期間開始日：一番目のレコードであれば、最初日、その以外は分割日
計算期間終了日：最後のレコードであれば、最終日、その以外は次の分割日-１日
対象元金：分割日が[入出金情報]の日付であれば、「残高」-「延滞中の約定返済元金合計」で算出する。ただ、この日付が「未返済年月1の前月」以上の場合は
